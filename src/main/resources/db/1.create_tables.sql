create table ingredients (id int8 generated by default as identity, description oid not null, is_vegan boolean not null, is_vegetarian boolean not null, name varchar(255) not null, nutrition_info_id int8, primary key (id));
create table ingredients_allergens (ingredient_id int8 not null, allergen_name varchar(255));
create table item_content (id int8 generated by default as identity, quantity int4, unit varchar(255), contained_ingredient_id int8, contained_item_id int8, meal_item_id int8 not null, primary key (id));
create table items (id int8 generated by default as identity, description varchar(255) not null, instructions oid not null, item_type varchar(255), name varchar(255) not null, primary key (id));
create table menu (id int8 generated by default as identity, name varchar(255), primary key (id));
create table menu_content (id int8 generated by default as identity, item_type varchar(255), contained_item_id int8, menu_id int8 not null, primary key (id));
create table nutrition_info (id int8 generated by default as identity, cplx_carbs_grams numeric(19, 2) not null, energy_kilo_cal numeric(19, 2) not null, energy_kilo_j numeric(19, 2) not null, fats_grams numeric(19, 2) not null, fibers_grams numeric(19, 2) not null, others_grams numeric(19, 2), proteins_grams numeric(19, 2) not null, salt_grams numeric(19, 2), saturates_grams numeric(19, 2), sugars_grams numeric(19, 2) not null, primary key (id));
alter table if exists menu add constraint UKm05sb1hgsv38qjb4ksyh5eat2 unique (name);
alter table if exists ingredients add constraint FKs5ebfblsmacu86esp05ylrqt6 foreign key (nutrition_info_id) references nutrition_info;
alter table if exists ingredients_allergens add constraint FKdwuv73qglhfkeyug8oreq542l foreign key (ingredient_id) references ingredients;
alter table if exists item_content add constraint FKj2knk4c7akt6els71ljfchyd foreign key (contained_ingredient_id) references ingredients;
alter table if exists item_content add constraint FK18nvc9j4coxuvyew3dwg05lnl foreign key (contained_item_id) references items;
alter table if exists item_content add constraint FKdrorn0b914fwmkf2qs5hj87ay foreign key (meal_item_id) references items;
alter table if exists menu_content add constraint FKnk9d2p0nxoajp85emaqumwqsr foreign key (contained_item_id) references items;
alter table if exists menu_content add constraint FKjf27i45rwp2yruionf60xng3b foreign key (menu_id) references menu;
